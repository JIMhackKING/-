C51 COMPILER V9.56.0.0   KEYS                                                              02/16/2018 06:15:50 PAGE 1   


C51 COMPILER V9.56.0.0, COMPILATION OF MODULE KEYS
OBJECT MODULE PLACED IN .\Objects\Keys.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE code\Keys.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings
                    -\Keys.lst) TABS(2) OBJECT(.\Objects\Keys.obj)

line level    source

   1          #include "SystemFunc.h"
   2          
   3          extern uchar MODE;
   4          extern int clock[4];
   5          
   6          // 加时
   7          void add_time(void)
   8          {
   9   1        clock[MODE]++;
  10   1        if(clock[MODE]==1440)
  11   1          clock[MODE]=0;
  12   1      }
  13          
  14          // 减时
  15          void sub_time(void)
  16          {
  17   1        clock[MODE]--;
  18   1        if(clock[MODE]<0)
  19   1          clock[MODE]=1439;
  20   1      }
  21          
  22          /************************************************
  23          作用：按钮一响应函数
  24          ************************************************/
  25          void key1_down(void)
  26          {
  27   1        uchar i,j=20,n=3;
  28   1        Delay(5);
  29   1        while(P3==0xef)
  30   1        {
  31   2          add_time();
  32   2          if(n==0)
  33   2          {
  34   3            j-=5;
  35   3            n=3;
  36   3          }
  37   2          if(j<5) j=5;
  38   2          n-=1;
  39   2          for(i=0;i<j;i++)
  40   2          {
  41   3            Bin2Bcd(clock[MODE]);
  42   3            display();
  43   3          }
  44   2        }
  45   1      }
  46          
  47          /************************************************
  48          作用：按钮二响应函数
  49          ************************************************/
  50          void key2_down(void)
  51          {
  52   1        uchar i,j=20,n=3;
  53   1        Delay(5);
  54   1        while(P3==0xdf)
C51 COMPILER V9.56.0.0   KEYS                                                              02/16/2018 06:15:50 PAGE 2   

  55   1        {
  56   2          sub_time();
  57   2          if(n==0)
  58   2          {
  59   3            j-=5;
  60   3            n=3;
  61   3          }
  62   2          if(j<5) j=5;
  63   2          n-=1;
  64   2          for(i=0;i<j;i++)
  65   2          {
  66   3            Bin2Bcd(clock[MODE]);
  67   3            display();
  68   3          }
  69   2        }
  70   1      }
  71          
  72          /************************************************
  73          作用：按钮三响应函数
  74          ************************************************/
  75          void key3_down(void)
  76          {
  77   1        uchar i;
  78   1        Delay(2);
  79   1        if(P3==0xfb)
  80   1        {
  81   2          MODE++;
  82   2          if(MODE==4)
  83   2            MODE=0;
  84   2        }
  85   1        for(i=0;i<30;i++)
  86   1        {
  87   2          Bin2Bcd(clock[MODE]);
  88   2          display();
  89   2        }
  90   1      }
  91          
  92          // 判断哪个按钮被按下并作出处理
  93          void key_press(void)
  94          {
  95   1        if(P3==0xef) key1_down();
  96   1        else if(P3==0xdf) key2_down();
  97   1        else if(P3==0xfb) key3_down();
  98   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    326    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       7
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
